# Docst Environment Variables

# ===== Database =====
DB_HOST=localhost
DB_PORT=5434
DB_NAME=docst
DB_USERNAME=postgres
DB_PASSWORD=postgres

# ===== OpenAI (Default Embedding Provider) =====
# Get your API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-proj-...
OPENAI_EMBEDDING_ENABLED=true
OPENAI_EMBEDDING_MODEL=text-embedding-3-small

# ===== Ollama (Optional Embedding Provider) =====
# Enable only if you want to use local Ollama instead of OpenAI
OLLAMA_EMBEDDING_ENABLED=false
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_EMBEDDING_MODEL=nomic-embed-text

# ===== Embedding Configuration =====
# Dimensions must match your embedding model:
# - OpenAI text-embedding-3-small: 1536
# - OpenAI text-embedding-ada-002: 1536
# - Ollama nomic-embed-text: 768
# - Ollama mxbai-embed-large: 1024
EMBEDDING_DIMENSIONS=1536

# ===== Neo4j (Graph RAG - Phase 4) =====
# Neo4j connection settings
NEO4J_URI=bolt://localhost:7687
NEO4J_USERNAME=neo4j
NEO4J_PASSWORD=password

# ===== RAG Configuration (Phase 4) =====
# UI 중심 설계: 검색 시 mode 파라미터로 동적 선택
# 전역 기본 모드 (프로젝트 설정이 없을 때만 사용)
DOCST_RAG_DEFAULT_MODE=auto

# 각 전략 활성화 여부
DOCST_RAG_PGVECTOR_ENABLED=true
DOCST_RAG_NEO4J_ENABLED=false
DOCST_RAG_HYBRID_ENABLED=true

# Neo4j Graph RAG 설정
DOCST_RAG_NEO4J_ENTITY_MODEL=gpt-4o-mini
DOCST_RAG_NEO4J_MAX_HOP=2

# Hybrid RAG fusion strategy: rrf | weighted_sum
DOCST_RAG_HYBRID_FUSION=rrf
DOCST_RAG_HYBRID_VECTOR_WEIGHT=0.6
DOCST_RAG_HYBRID_GRAPH_WEIGHT=0.4

# ===== Application Configuration =====
# Base URL for the application (used for Swagger UI, callbacks, etc.)
# Examples:
#   - Local: http://localhost:8342
#   - Production: https://api.docst.com
DOCST_BASE_URL=http://localhost:8342

# ===== Git Storage =====
DOCST_GIT_ROOT=/data/git

# ===== Authentication =====
DOCST_AUTH_MODE=local

# JWT Configuration
JWT_SECRET=your-secret-key-change-in-production-must-be-256-bits

# GitHub OAuth Configuration
# Get your credentials from: https://github.com/settings/developers
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret
GITHUB_CALLBACK_URL=http://localhost:8342/api/auth/github/callback
GITHUB_FRONTEND_CALLBACK_URL=http://localhost:3000/auth/callback

# GitHub Webhook Configuration
# Generate a random secret for webhook signature verification
# You can generate one with: openssl rand -hex 32
GITHUB_WEBHOOK_SECRET=your-webhook-secret-change-in-production

# ===== Encryption =====
# Generate with: openssl rand -base64 32
DOCST_ENCRYPTION_KEY=your-encryption-key-change-in-production

# ===== Admin Initialization =====
# Auto-create admin account on startup (useful for local/dev environments)
# For production, use the /api/setup/initialize endpoint instead
DOCST_ADMIN_AUTO_INIT=false
DOCST_ADMIN_EMAIL=admin@docst.local
DOCST_ADMIN_PASSWORD=
DOCST_ADMIN_NAME=System Admin

# ===== CORS Configuration =====
# Enable CORS for cross-origin requests from frontend
DOCST_CORS_ENABLED=true
# Comma-separated list of allowed origins
DOCST_CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001,http://localhost:3002
DOCST_CORS_ALLOWED_METHODS=GET,POST,PUT,PATCH,DELETE,OPTIONS
DOCST_CORS_ALLOWED_HEADERS=Authorization,Content-Type,Accept,X-Requested-With
DOCST_CORS_ALLOW_CREDENTIALS=true
DOCST_CORS_MAX_AGE=3600
DOCST_CORS_EXPOSED_HEADERS=Authorization
