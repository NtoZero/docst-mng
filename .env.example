# ============================================================
# Docst Environment Variables
# ============================================================
#
# IMPORTANT: API Keys and external service credentials are now
# managed through the Web UI (Settings ‚Üí Credentials).
#
# This file only contains infrastructure variables needed
# BEFORE the application can access the database.
#
# Web UI Management:
#   - OpenAI/Ollama API Keys ‚Üí Settings ‚Üí Credentials
#   - Neo4j Connection ‚Üí Admin Settings ‚Üí Neo4j
#   - PgVector Settings ‚Üí Admin Settings ‚Üí PgVector
#   - RAG Configuration ‚Üí Project Settings ‚Üí RAG Configuration
#
# Documentation: docs/impl/phase6/dynamic-llm.md
# ============================================================


# ============================================================
# 1. DATABASE CONFIGURATION
# ============================================================
# PostgreSQL connection settings (used by Spring Boot JPA)
# Default port 5434 is mapped from Docker container's 5432

DB_HOST=localhost
DB_PORT=5434
DB_NAME=docst
DB_USERNAME=postgres
DB_PASSWORD=postgres


# ============================================================
# 2. BACKEND APPLICATION
# ============================================================
# Base URL for the backend API (used for Swagger UI, OAuth callbacks, etc.)
# Examples:
#   - Local development: http://localhost:8342
#   - Production: https://api.docst.com
DOCST_BASE_URL=http://localhost:8342

# Git repository mirror storage path
# Where cloned repositories are stored on the server
DOCST_GIT_ROOT=/data/git


# ============================================================
# 3. AUTHENTICATION & SECURITY
# ============================================================
# Authentication mode: local | github
DOCST_AUTH_MODE=local

# JWT token signing secret (REQUIRED)
# ‚ö†Ô∏è  CHANGE THIS IN PRODUCTION! Must be at least 256 bits (32 characters)
# Generate with: openssl rand -base64 32
JWT_SECRET=your-secret-key-change-in-production-must-be-256-bits

# GitHub OAuth Configuration
# Get your credentials from: https://github.com/settings/developers
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret
GITHUB_CALLBACK_URL=http://localhost:8342/api/auth/github/callback
GITHUB_FRONTEND_CALLBACK_URL=http://localhost:3000/auth/callback

# GitHub Webhook Configuration
# Generate a random secret for webhook signature verification
# Generate with: openssl rand -hex 32
GITHUB_WEBHOOK_SECRET=your-webhook-secret-change-in-production

# Credential Encryption Key (REQUIRED)
# ‚ö†Ô∏è  CRITICAL: Used to encrypt/decrypt API keys stored in dm_credential table
# Must be at least 32 bytes for AES-256-GCM encryption
# Generate with: openssl rand -base64 32
DOCST_ENCRYPTION_KEY=your-encryption-key-change-in-production


# ============================================================
# 4. CORS CONFIGURATION
# ============================================================
# Enable CORS for cross-origin requests from frontend
DOCST_CORS_ENABLED=true

# Comma-separated list of allowed origins
DOCST_CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001,http://localhost:3002

# Allowed HTTP methods
DOCST_CORS_ALLOWED_METHODS=GET,POST,PUT,PATCH,DELETE,OPTIONS

# Allowed request headers
DOCST_CORS_ALLOWED_HEADERS=Authorization,Content-Type,Accept,X-Requested-With

# Allow credentials (cookies, authorization headers)
DOCST_CORS_ALLOW_CREDENTIALS=true

# Preflight cache duration in seconds
DOCST_CORS_MAX_AGE=3600

# Headers exposed to the client
DOCST_CORS_EXPOSED_HEADERS=Authorization


# ============================================================
# 5. ADMIN INITIALIZATION
# ============================================================
# Auto-create admin account on startup (useful for local/dev environments)
# For production, use the /api/setup/initialize endpoint instead
DOCST_ADMIN_AUTO_INIT=false
DOCST_ADMIN_EMAIL=admin@docst.local
DOCST_ADMIN_PASSWORD=
DOCST_ADMIN_NAME=System Admin


# ============================================================
# 6. FRONTEND CONFIGURATION
# ============================================================
# API endpoint URL for frontend (Next.js)
NEXT_PUBLIC_API_BASE=http://localhost:8342


# ============================================================
# MIGRATION GUIDE
# ============================================================
# The following variables have been moved to Web UI management:
#
# üîë API KEYS (Settings ‚Üí Credentials):
#   - OPENAI_API_KEY           ‚Üí Credential type: OPENAI_API_KEY
#   - ANTHROPIC_API_KEY        ‚Üí Credential type: ANTHROPIC_API_KEY
#   - (stored encrypted in dm_credential table)
#
# üóÑÔ∏è  EXTERNAL SERVICES (Admin Settings):
#   - NEO4J_URI                ‚Üí Admin Settings ‚Üí Neo4j ‚Üí URI
#   - NEO4J_USERNAME           ‚Üí Credential type: NEO4J_AUTH
#   - NEO4J_PASSWORD           ‚Üí Credential type: NEO4J_AUTH
#   - PGVECTOR settings        ‚Üí Admin Settings ‚Üí PgVector
#
# üß† EMBEDDING CONFIGURATION (Admin Settings):
#   - OPENAI_EMBEDDING_MODEL   ‚Üí Admin Settings ‚Üí Embedding ‚Üí Model
#   - OLLAMA_BASE_URL          ‚Üí Admin Settings ‚Üí Embedding ‚Üí Ollama URL
#   - OLLAMA_EMBEDDING_MODEL   ‚Üí Admin Settings ‚Üí Embedding ‚Üí Model
#   - EMBEDDING_DIMENSIONS     ‚Üí Admin Settings ‚Üí Embedding ‚Üí Dimensions
#
# üîç RAG CONFIGURATION (Project Settings):
#   - DOCST_RAG_DEFAULT_MODE   ‚Üí Project Settings ‚Üí RAG ‚Üí Default Mode
#   - DOCST_RAG_*_ENABLED      ‚Üí Project Settings ‚Üí RAG ‚Üí Enabled Strategies
#   - DOCST_RAG_NEO4J_*        ‚Üí Project Settings ‚Üí RAG ‚Üí Neo4j Settings
#   - DOCST_RAG_HYBRID_*       ‚Üí Project Settings ‚Üí RAG ‚Üí Hybrid Settings
#
# üìö HOW TO SET UP API KEYS IN WEB UI:
#   1. Start the application: docker-compose up -d
#   2. Access Web UI: http://localhost:3000
#   3. Login as admin
#   4. Navigate to: Settings ‚Üí Credentials
#   5. Click "Add Credential"
#   6. Select Type: OPENAI_API_KEY
#   7. Enter your API key: sk-proj-...
#   8. Choose Scope: SYSTEM (global) or PROJECT (per-project)
#   9. Save (stored encrypted with DOCST_ENCRYPTION_KEY)
#
# üìñ Documentation:
#   - Dynamic LLM Architecture: docs/impl/phase6/dynamic-llm.md
#   - Credential Management: docs/impl/phase4/credential-management.md
#   - RAG Configuration: docs/impl/phase4/rag-configuration.md
# ============================================================
